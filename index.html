<!DOCTYPE html>
<html lang="en">
<head>
	<title>Комфортная разработка на React</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">
</head>
<body class="shower list">

	<header class="caption">
		<h1>Комфортная разработка на React</h1>
		<p>Самохина Вероника</p>
	</header>

	<section class="slide" id="cover">
		<h2>Комфортная разработка на React</h2>
		<p>Самохина Вероника</p>

		<style>
			#cover h2 {
				margin:30px 0 0;
				text-align:center;
				font-size:70px;
				}
			#cover p {
				margin:10px 0 0;
				text-align:center;
				font-style:italic;
				font-size:20px;
				}
		</style>
	</section>

	<section class="slide">
		<a href="http://bit.ly/2qVzhag" id="general-link" target="_blank">http://bit.ly/2qVzhag</a>

		<p><a href="https://github.com/Aminopyridin/konfur-react-workshop" target="_blank">https://github.com/Aminopyridin/konfur
			-react-workshop</a></p>

		<style>
			#general-link {
				font-size: 70px;
				text-align: center;
				display: block;
				width: auto;
				margin: 60px auto 120px;
				background: none;
			}
		</style>
	</section>

	<section class="slide">
		<h2>О чем пойдет речь</h2>
		<ol>
			<li>Flow — библиотека для статической типизации</li>
			<li>Storybook — песочница для компонентов</li>
			<li>Enzyme — библиотека для тестировния React-компонентов</li>
		</ol>
	</section>

	<section class="slide">
		<h2>Начнем с Flow</h2>
		<img src="pictures/flow.png" alt="Flow">
	</section>

	<section class="slide">
		<h2>Установка Flow</h2>
		<ul>
			<li>Открй сайт <a href="https://flow.org/en/docs/install/">https://flow.org/en/docs/install/</a></li>
			<li>Выбери пункт <code>npm</code></li>
			<li>Выполни раздел Setup Flow по порядку (кроме <code>npm install</code> — это уже сделано)</li>
			<li>Расставь флаг <code>//@flow</code>первой строкой во всех js-файлах директории src</li>
			<li>При запуске <code>npm run flow</code> не должно быть ошибок</li>
		</ul>
	</section>


	<section class="slide">
		<h2>Типы во Flow</h2>
		<ol>
			<li>Примитивы: string, number, boolean</li>
			<li>any</li>
			<li>string[], { value:string }</li>
			<li>(id: string) => any;</li>
			<li>function foo(id: string): boolean {return true}</li>
		</ol>
	</section>

	<section class="slide">
		<h2>Опиши тип вопроса</h2>
		<pre>
			<code>export type QuestionType = {</code>
			<code>	text: string,</code>
			<code>	image?: string,</code>
			<code>	variants: Variant[]</code>
			<code>}</code>
		</pre>

		<p>Он есть закомментированный в файле App.js</p>
	</section>

	<section class="slide">
		<h2>Опиши тип варианта ответа</h2>
	</section>

	<section class="slide">
		<h2>Мой вариант ответа</h2>
		<pre>
			<code>export type Variant = {</code>
			<code>	value: string,</code>
			<code>	label: string,</code>
			<code>}</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Использование типов</h2>
		<p>Функция <code>getQuestions</code> возвращает вопросы, теперь определим, что она возвращает вопросы типа
			<code>QuestionType</code></p>
		<p>Для этого после круглых скобок в объявлении функции напишем <code>: QuestionType</code></p>
	</section>

	<section class="slide">
		<h2>Опиши пропсы компонента QuestionList</h2>
		<p>В файле QuestionList есть ссылка где рассказано, как это сделать.</p>
		<p>Тут всего одно поле, так что это должно быть просто.</p>
	</section>

	<section class="slide">
		<h2>Мой вариант ответа</h2>
		<pre>
			<code>props: {</code>
			<code>	questions: QuestionType[],</code>
			<code>}</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Теперь Flow будет за тобой пристально следить</h2>
	</section>

	<section class="slide">
		<h2>Storybook</h2>
		<img src="pictures/storybook.svg" style="width: 100%; margin: 30px auto;" alt="Storybook">
	</section>


	<section class="slide">
		<h2>Установка Storybook</h2>
		<ul>
			<li>Откройсайт <a href="https://storybook.js.org/basics/slow-start-guide/">https://storybook.js
				.org/basics/slow-start-guide/</a></li>
			<li>Выполни все по порядку (кроме <code>npm install</code> — это уже сделано)</li>
			<li>Сделай все, чтобы сторибук запустился с дефолтным примером</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Подготовься к написанию собственной story</h2>
		<p>В конфиге сторибука надо сделать, чтобы он показывал все файлы, которые ты положешь в папку stories.
			Я делаю это как-то так:</p>
		<pre>
			<code>const req = require.context('../stories', true, /\.js$/);</code>
			<code>req.keys().forEach((filename) => req(filename));</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Напиши "историю" для будущего компонента Question</h2>
		<p>Сделай все по образу кнопок</p>
	</section>

	<section class="slide">
		<h2>Напиши сам компонент вопроса</h2>
		<p>Попробуй сделать это сам, тебе могут пригодиться компоненты Card и RadioButton из material-ui, ссылка на
			них у тебя readme.md</p>
		<p>*<i>В процессе написания лучше будет сразу писать "истории" к вопросу и типы для flow</i></p>
		<p><mark>Обрати внимание</mark>: для того, чтобы компоненты material-ui могли рендериться, их нужно обернуть в
			"тему". Оберни рендер компонента Question в <code>MuiThemeProvider</code>, как это сделано в компоненте App
			.js</p>
	</section>

	<section class="slide">
		<img src="pictures/quizpage.jpg" class="cover" alt="Вопросы выглядят так">
	</section>

	<section class="slide">
		<h2>Мой вариант ответа</h2>
		<p>Находится у тебя в файле <mark>secret</mark> :)</p>
	</section>

	<section class="slide">
		<h2>Enzyme</h2>
		<img src="pictures/enzyme.jpg" style="width: 50%; margin: 0 auto; display: block" alt="Storybook">
	</section>


	<section class="slide">
		<h2>Пишем первый тест</h2>
		<p>Посмотри на компонент Question. Какие тесты к нему можно написать?</p>
	</section>

	<section class="slide">
		<h2>Пишем первый тест</h2>
		<p>Создай файл для теста в папке tests</p>
		<pre>
			<code>import React from 'react';</code>
			<code>import { expect } from 'chai';</code>
			<code>import { shallow } from 'enzyme';</code>
			<code>import sinon from 'sinon';</code>
			<code>import Question from '../src/components/Question';</code>
		</pre>
	</section>


	<section class="slide">
		<h2>Пишем первый тест</h2>
		<pre>
			<code>describe('&lt;Question /&gt;', () => {</code>
			<code>	it('должен генерировать две радио-кнопки', () => {</code>
			<code>		const variants = [{value: 'val1', label: 'text1'},</code>
			<code>						  {value: 'val2', label: 'text2'}]</code>
			<code>		const wrapper = shallow(&lt;Question variants={variants}/&gt;);</code>
			<code>		expect(wrapper.find('RadioButton').length).to.equal(2);</code>
			<code>	});</code>
			<code>});</code>
		</pre>
	</section>


	<section class="slide">
		<h2>Напиши еще пару тестов</h2>
		<p>Напиши тесты для проверки, что картинка рисуется, если передан параметр image и не рисуется, если не
			передан</p>
		<p>Тебе может пригодиться метод <code>exists</code>, ссылка на него в readme.md</p>
	</section>


	<section class="slide">
		<h2>Напиши тест события</h2>
		<p>Напиши тесты для проверки, при нажатии на кнопку, вызывается событие onClick. Для этого тебе понадобится
			метод <code>spy</code> библиотеки <code>sinon</code>. Как это сделать, написано по ссылке
			<a href="http://airbnb.io/enzyme/docs/api/shallow.html">http://airbnb.io/enzyme/docs/api/shallow.html</a>
		</p>
		<p>*<i>Задание со *:</i> напиши тест, который проверяет, что onChange передает правильное значение</p>
	</section>


	<section class="slide">
		<h2>Мой вариант ответа</h2>
		<p>Находится у тебя в файле <mark>secret</mark> :)</p>
	</section>


	<section class="slide">
		<h2>Конец :)</h2>
		<p>Теперь ты знаешь:</p>
		<ul>
			<li>Как сделать JS статически-типизированным языком</li>
			<li>Как разработать компонент изолированно от всего приложения</li>
			<li>Как хранить в красивом виде библиотеку компонентов</li>
			<li>Как тестировать React-компоненты</li>
		</ul>
	</section>

	<div class="progress"></div>

	<script src="shower/shower.min.js"></script>

</body>
</html>
